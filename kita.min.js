(function(){var t,e,n;(function(i){function r(t,e){return k.call(t,e)}function o(t,e){var n,i,r,o,s,c,u,l,a,f,p=e&&e.split("/"),h=v.map,g=h&&h["*"]||{};if(t&&"."===t.charAt(0))if(e){for(p=p.slice(0,p.length-1),t=p.concat(t.split("/")),l=0;t.length>l;l+=1)if(f=t[l],"."===f)t.splice(l,1),l-=1;else if(".."===f){if(1===l&&(".."===t[2]||".."===t[0]))break;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||g)&&h){for(n=t.split("/"),l=n.length;l>0;l-=1){if(i=n.slice(0,l).join("/"),p)for(a=p.length;a>0;a-=1)if(r=h[p.slice(0,a).join("/")],r&&(r=r[i])){o=r,s=l;break}if(o)break;!c&&g&&g[i]&&(c=g[i],u=l)}!o&&c&&(o=c,s=u),o&&(n.splice(0,s,o),t=n.join("/"))}return t}function s(t,e){return function(){return h.apply(i,x.call(arguments,0).concat([t,e]))}}function c(t){return function(e){return o(e,t)}}function u(t){return function(e){b[t]=e}}function l(t){if(r(d,t)){var e=d[t];delete d[t],m[t]=!0,p.apply(i,e)}if(!r(b,t)&&!r(m,t))throw Error("No "+t);return b[t]}function a(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function f(t){return function(){return v&&v.config&&v.config[t]||{}}}var p,h,g,y,b={},d={},v={},m={},k=Object.prototype.hasOwnProperty,x=[].slice;g=function(t,e){var n,i=a(t),r=i[0];return t=i[1],r&&(r=o(r,e),n=l(r)),r?t=n&&n.normalize?n.normalize(t,c(e)):o(t,e):(t=o(t,e),i=a(t),r=i[0],t=i[1],r&&(n=l(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},y={require:function(t){return s(t)},exports:function(t){var e=b[t];return e!==void 0?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:f(t)}}},p=function(t,e,n,o){var c,a,f,p,h,v,k=[];if(o=o||t,"function"==typeof n){for(e=!e.length&&n.length?["require","exports","module"]:e,h=0;e.length>h;h+=1)if(p=g(e[h],o),a=p.f,"require"===a)k[h]=y.require(t);else if("exports"===a)k[h]=y.exports(t),v=!0;else if("module"===a)c=k[h]=y.module(t);else if(r(b,a)||r(d,a)||r(m,a))k[h]=l(a);else{if(!p.p)throw Error(t+" missing "+a);p.p.load(p.n,s(o,!0),u(a),{}),k[h]=b[a]}f=n.apply(b[t],k),t&&(c&&c.exports!==i&&c.exports!==b[t]?b[t]=c.exports:f===i&&v||(b[t]=f))}else t&&(b[t]=n)},t=e=h=function(t,e,n,r,o){return"string"==typeof t?y[t]?y[t](e):l(g(t,e).f):(t.splice||(v=t,e.splice?(t=e,e=n,n=null):t=i),e=e||function(){},"function"==typeof n&&(n=r,r=o),r?p(i,t,e,n):setTimeout(function(){p(i,t,e,n)},4),h)},h.config=function(t){return v=t,h},n=function(t,e,n){e.splice||(n=e,e=[]),r(b,t)||r(d,t)||(d[t]=[t,e,n])},n.amd={jQuery:!0}})(),n("../libs/almond",function(){}),n("is",[],function(){function t(t,e){var n;return"string"!=typeof e?!1:(n=Object.prototype.toString.call(t).slice(8,-1).toLowerCase(),"domwindow"===n&&(void 0===t&&(n="undefined"),null===t&&(n="null")),n===e.toLowerCase())}return t}),n("kObject",["./is"],function(t){function e(){return this.id=this.generateGuid(),t(this.initialize,"function")&&this.initialize.apply(this,arguments),this}var n=function(){};return e.prototype.extend=function(t,e){var i,r=this;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){r.apply(this,arguments)},this.copyProperties(i,r),n.prototype=r.prototype,i.prototype=new n,t&&this.copyProperties(i.prototype,t),e&&this.copyProperties(i,e),i.prototype.constructor=i,i.prototype.__super__=r.prototype,i.copyProperties=this.copyProperties,i.extend=this.extend,i},e.prototype.copyProperties=function(t){for(var e=Array.prototype.slice.call(arguments,1),n=0,i=e.length;i>n;n++)for(var r in e[n])t[r]=e[n][r];return t},e.prototype.generateGuid=function(){var t=function(){return Math.floor(65536*Math.random()).toString(16)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.prototype.convertArguments=function(t){return Array.prototype.slice.call(t)},e.extend=e.prototype.extend,e.copyProperties=e.prototype.copyProperties,e}),n("pubsub",["./kObject","./is"],function(t,e){var n=t.extend({constructor:function n(t){if(this._callbacks={},this._callbacksLength=0,this.asyncEvents=!1,!e(t,"object"))return this;for(var n in t)this[n]=t[n];return this},bind:function(t,n,i){var r,o,s;if(!t||!e(n,"function")&&!e(n,"string"))return!1;if(e(n,"string")&&!e(i,"object"))return!1;for(r=t.split(" "),o=0,s=r.length;s>o;o++)this._callbacks[r[o]]=Array.isArray(this._callbacks[r[o]])?this._callbacks[r[o]]:[],this._callbacks[r[o]].push({callback:n,context:i}),this._callbacksLength++;return!0},on:function(){return this.bind.apply(this,arguments)},unbind:function(t,n){var i,r,o=0,s=!1;if(!t||!n)return!1;if(!this._callbacks[t])return!1;if(i=this._callbacks[t],!Array.isArray(i))return this._callbacks[t]=[],!1;for(r=i.length;r>o;o++)e(i[o],"object")&&i[o].callback===n&&(i.splice(o,1),this._callbacksLength--,s=!0);return i.length?this._callbacks[t]=i:delete this._callbacks[t],s},off:function(){return this.unbind.apply(this,arguments)},trigger:function(t){var n,i,r,o;if(n=this.convertArguments(arguments),!t||!this._callbacks[t])return!1;if(n=n.length>1?n.slice(1):[],i=this._callbacks[t],!Array.isArray(i))return this._callbacks[t]=[],!1;for(r=0,o=i.length;o>r;r++)e(i[r],"object")&&(e(i[r].callback,"function")||e(i[r].callback,"string")&&e(i[r].context,"object"))&&this._callFunction(i[r].callback,n,i[r].context);return!0},_callFunction:function(t,n,i){return e(t,"string")&&!e(i,"object")?!1:(t=e(t,"function")?t:i[t],this.asyncEvents?setTimeout(function(){t.apply(i,n)}):t.apply(i,n),!0)},getAllListeners:function(){return this._callbacks},getListenerLength:function(){return this._callbacksLength},reset:function(){this._callbacks={},this._callbacksLength=0}});return n}),n("app",["./kObject"],function(t){var e=t.extend({el:null,initialize:function(){}});return e}),n("icc",["./pubsub"],function(t){var e=t.extend({});return new e}),n("controller",["./kObject","./icc","./is"],function(t,e,n){var i=t.extend({icc:e,kitaControllerType:"vanilla",iccNamespace:"controller",listeners:null,constructor:function(t){return n(t,"object")&&this.copyProperties(this,t),n(this.registerListeners,"function")&&this.registerListeners(),n(this.initialize,"function")&&this.initialize.apply(this,arguments),n(this.delegateEvents,"function")&&this.delegateEvents(),this},initialize:function(){},registerListeners:function(){var t,e=this.getNamespace();if(!n(this.icc,"object")||!n(this.listeners,"object"))return!1;for(t in this.listeners)"@"===t.substring(0,1)?this.icc.on(t.substring(1),this.listeners[t],this):this.icc.on(e+":"+t,this.listeners[t],this);return!0},unRegisterListeners:function(){var t,e=this.getNamespace();if(!this.icc||!this.listeners)return!1;for(t in this.listeners)"@"===t.substring(0,1)?this.icc.off(t.substring(1),this.listeners[t],this):this.icc.off(e+":"+t,this.listeners[t],this);return!0},getNamespace:function(){return this.kitaControllerType+":"+this.iccNamespace}});return i}),n("dataController",["./controller"],function(t){var e=t.extend({kitaControllerType:"data",iccNamespace:"controller",initialize:function(){},remove:function(){this.unRegisterListeners()}});return e}),n("dom",[],function(){return window&&window.document?{on:function(t,e,n){},off:function(t,e,n){},get:function(t,e){return"object"!=typeof t||"function"!=typeof t.querySelector?!1:t.querySelector(e)},remove:function(t){return"object"!=typeof t&&"function"!=typeof t.remove?!1:(t.remove(),!0)}}:{on:function(){},off:function(){},get:function(){},insert:function(){},remove:function(){}}}),n("uiController",["./controller","./dom"],function(t,e){var n=t.extend({el:null,selector:null,events:null,kitaControllerType:"ui",iccNamespace:"controller",initialize:function(){},delegateEvents:function(){return this.toggleEvents("on")},undelegateEvents:function(){return this.toggleEvents("off")},toggleEvents:function(t){var n;return"object"!=typeof this.events?!1:("off"!==t&&this.undelegateEvents(),this.el?(n=Object.keys(this.events),n.forEach(function(n){"on"===t?e.on(this.el,n,this[this.events[n]]):"off"===t&&e.off(this.el,n,this[this.events[n]])},this),this):!1)},remove:function(){this.unRegisterListeners(),this.undelegateEvents(),e.remove(this.el)}});return n}),n("kobject",["./is"],function(t){function e(){return this.id=this.generateGuid(),t(this.initialize,"function")&&this.initialize.apply(this,arguments),this}var n=function(){};return e.prototype.extend=function(t,e){var i,r=this;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){r.apply(this,arguments)},this.copyProperties(i,r),n.prototype=r.prototype,i.prototype=new n,t&&this.copyProperties(i.prototype,t),e&&this.copyProperties(i,e),i.prototype.constructor=i,i.prototype.__super__=r.prototype,i.copyProperties=this.copyProperties,i.extend=this.extend,i},e.prototype.copyProperties=function(t){for(var e=Array.prototype.slice.call(arguments,1),n=0,i=e.length;i>n;n++)for(var r in e[n])t[r]=e[n][r];return t},e.prototype.generateGuid=function(){var t=function(){return Math.floor(65536*Math.random()).toString(16)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.prototype.convertArguments=function(t){return Array.prototype.slice.call(t)},e.extend=e.prototype.extend,e.copyProperties=e.prototype.copyProperties,e}),n("collection",["./kobject","./is"],function(t,e){var n=t.extend({model:null,initialize:function(){},add:function(t,n){var i;return n=e(n,"object")?n:!1,e(t,"object")?(i=e(this.model,"function")?new this.model(t):t,e(n.index,"number")&&n.index<=this.models.length||this.models.push(i),void 0):!1},bulkAdd:function(t,n){return e(t,"array")?(t.forEach(function(t){this.add(t,n)},this),!0):!1},filter:function(t){}});return n}),n("model",["./kObject","./pubsub","./is"],function(t,e,n){var i=t.extend({constructor:function(t,i){return this.id=this.generateGuid(),this.attributes={},i=n(i,"object")?i:{},e.call(this),this.setAttributes(t,i.silent),n(this.initialize,"function")&&this.initialize.apply(this,arguments),this},set:function(t,e,i){var r=null;return n(t,"undefined")?!1:this.attributes[t]===e?!1:(r=this.attributes[t],this.attributes[t]=e,i||(this.trigger("change:"+t,e,r),this.trigger("change",t,e,r)),!0)},setAttributes:function(t,e){var i;if(!n(t,"object"))return!1;for(i in t)this.set(i,t[i],e);return!0},get:function(t){return n(t,"string")?t?this.attributes[t]:void 0:void 0},destroy:function(){this._callbacks={},this._callbacksLength=0}});return t.copyProperties(i.prototype,e.prototype),i}),n("kita",["./pubsub","./app","./controller","./dataController","./uiController","./collection","./model"],function(t,e,n,i,r,o,s){var c={};return c.pubSub=t,c.app=e,c.Controller=n,c.UIController=r,c.DataController=i,c.Collection=o,c.Model=s,c}),n("build",["./kita"],function(t){this.Kita=t}),e(["build"],null,null,!0)})();
//@ sourceMappingURL=kita.min.js.map